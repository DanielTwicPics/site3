(function(n){var t=n.document,i=ppDiv="",f=$(n),r=function(){return $("#waitingOverlay")},u=function(){return r().hide(),$.version=="mobile"&&(document.body.style.overflow="initial"),ppDiv&&i.removeChild(ppDiv),i&&t.body.removeChild(i),i=ppDiv="",f.unbind("resize",function(){e()}),f.unbind("resize scroll",s),document.body.style.overflow="auto",!1},c=function(){return typeof $(document).scrollTop!="undefined"&&$(document).scrollTop()||document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop},s=function(){var n=t.getElementById("overlay")!=null?"overlay":"overlayLoad";t.getElementById(n)&&(t.getElementById(n).style.height=($(t).height?$(t).height():t.documentElement.scrollHeight)+"px");t.getElementById("waitingOverlay")&&(t.getElementById("waitingOverlay").style.height=($(t).height?$(t).height():t.documentElement.scrollHeight)+"px")},h=function(){var n=$("body .popin"),r=c(),i=n[0].clientWidth/2,u=n[0].clientHeight/2,f=t.documentElement.clientHeight/2+r;n[0].style.marginLeft="-"+i+"px";n[0].style.marginRight=i+"px";n[0].style.marginTop="-"+u+"px";n[0].style.top=f+"px";$.version=="mobile"&&(document.body.style.overflow="hidden")},e=function(n){var i=$("body .popinFull"),f=c(),r=Math.ceil(t.documentElement.clientHeight*94/100),u=Math.ceil(t.documentElement.clientHeight*3/100),e=Math.ceil(u+f),o=n||!1;i[0].clientHeight<=r&&o==!0?(i[0].style.height=r+"px",i[0].style.marginTop=""):i[0].clientHeight<=r&&o==!1?(u=i[0].clientHeight/2,e=t.documentElement.clientHeight/2+f,i[0].style.marginTop="-"+u+"px",i[0].style.height=""):(i[0].style.marginTop="",i[0].style.height="");i[0].style.top=e+"px"},o=function(){var n=t.createElement("div");return n.className="pClose",n.innerHTML="&#10006",n},l=function(n){var i=t.createElement("div");return i.className="popinTitle",i.innerHTML=n,i};$.popin={showOverlay:function(n){if(r().hide(),i===""){if(i=t.createElement("div"),i.id="overlay",i.style.height=($(t).height?$(t).height():t.documentElement.clientHeight)+"px",n&&n.isOverlayClick&&!n.loader&&(i.onclick=function(t){i&&t.target.id=="overlay"&&(u(),n&&n.callback&&n.callback())}),t.body.appendChild(i),n&&n.loader){var e=t.createElement("p");t.getElementById("overlay").id="overlayLoad";t.getElementById("overlayLoad").appendChild(e)}n&&n.isOverflowHidden&&(document.body.style.overflow="hidden");f.bind("resize scroll",s)}return i},isWaitingOverlay:function(){return!!r().length},showWaitingOverlay:function(){return r().length&&(f.bind("resize scroll",s),r().show(),s()),r},showBlockWaitingOverlay:function(n){var u,t,i,f;if(n||n.context){u=n.context;t=r().clone().removeAttr("id style").addClass("blockOverlay jsblockOverlay");u.prepend(t);t.show();i=t.children(":first");i.length&&(f=Math.round(t.height()/2-i.height()/2),i.css({top:f+"px"}),n.loaderScaling&&i.css({transform:"scale("+n.loaderScaling+")"}));return}},removeBlockWaitingOverlay:function(n){if(n){var t=n.context,i=$(".jsblockOverlay.waitingOverlay",t);i.remove();return}},hideOverlay:function(){u()},confirm:function(n,f){var c;if(r().hide(),ppDiv===""){var a=t.createElement("p"),e=t.createElement("input"),s=t.createElement("input"),v=o();ppDiv=t.createElement("div");ppDiv.className="popin "+(f.className||"");a.innerHTML=n;e.type=s.type="button";e.className=f.czClass!=null?f.czClass:"btGreen";e.value=f&&f.btnOkTxt||"Valider";s.className=f.czCancelClass!=null?f.czCancelClass:"btWhite";s.value=f&&f.btnCancelTxt||"Annuler";f.actionsInDiv!=null&&f.actionsInDiv==!0&&(c=t.createElement("div"),f.actionsDivClassName!=null&&(c.className=f.actionsDivClassName));this.showOverlay(f);e.onclick=function(){f&&f.preCallback&&f.preCallback(!0);u();f&&f.callback&&f.callback(!0)};v.onclick=s.onclick=function(){f&&f.preCallback&&f.preCallback(!1);u();f&&f.callback&&f.callback(!1)};ppDiv.appendChild(v);f&&f.title&&ppDiv.appendChild(l(f.title));ppDiv.appendChild(a);f.actionsInDiv!=null&&f.actionsInDiv==!0?(f.doReverseActionButtons!=null&&f.doReverseActionButtons?(c.appendChild(s),c.appendChild(e)):(c.appendChild(e),c.appendChild(s)),ppDiv.appendChild(c)):f.doReverseActionButtons!=null&&f.doReverseActionButtons?(ppDiv.appendChild(s),ppDiv.appendChild(e)):(ppDiv.appendChild(e),ppDiv.appendChild(s));i.appendChild(ppDiv);h()}return!1},alert:function(n,f){if(r().hide(),ppDiv===""){var s=t.createElement("p"),e=t.createElement("input"),c=o();ppDiv=t.createElement("div");ppDiv.className="popin";s.innerHTML=n;e.type="button";e.className="btPopin";e.value=f&&f.btnTxt||"Continuer";this.showOverlay(f);c.onclick=e.onclick=function(){u();f&&f.callback&&f.callback()};ppDiv.appendChild(c);f&&f.title&&ppDiv.appendChild(l(f.title));ppDiv.appendChild(s);ppDiv.appendChild(e);i.appendChild(ppDiv);h()}return!1},load:function(n,s){r().hide();var h=t.createElement("div"),c=o(),l=s&&s.fullSize||!1;return ppDiv=t.createElement("div"),ppDiv.className="popinFull ",s&&s.addedClass&&(ppDiv.className+=s.addedClass),s.isOverlayClick==undefined&&(s.isOverlayClick=!0),s.isOverflowHidden&&(document.body.style.overflow="hidden"),this.showOverlay(s),c.onclick=function(){u();s&&s.callback&&s.callback()},ppDiv.appendChild(c),ppDiv.appendChild(h),$(h).load(n,function(){i.appendChild(ppDiv);e(l)}),f.bind("resize",function(){e(l)}),s.callback(),!1},loadAjaxPopin:function(n,u){var s=$.extend({isModal:!1,addedClass:"",method:"GET",data:"",callback:$.noop,isPopinFullScreen:!1,isOverflowHidden:!0,isWaitingOverlayHidden:!1,isHidden:!1},u),c,l,a=$("body",t);return s.isWaitingOverlayHidden||$.popin.showWaitingOverlay(),s.isOverflowHidden&&(document.body.style.overflow="hidden"),s.isPopinFullScreen?(c=t.createElement("div"),c.className="popinFull",this.showOverlay(u),i.appendChild(c),f.bind("resize",function(){e(!1)})):(c=$(".popin")[0],c||(c=t.createElement("div"),c.className="popin",t.body.appendChild(c))),$.ajax({type:s.method,url:n,dataType:"html",data:s.data,cache:!1,success:function(n){var i,r;l=$(c);l.empty();l.hide();i=o();i.className+=" jsCancel";c.appendChild(i);s.addedClass&&l.addClass(s.addedClass);$.popin.showOverlay({isOverlayClick:!s.isModal,callback:function(){s.isModal||(l.remove(),document.body.style.overflow="auto")}});r=t.createElement("div");r.innerHTML=n;c.appendChild(r);s.callback();$(".jsCancel",l).click(function(){return $.popin.hideOverlay(),l.remove(),document.body.style.overflow="auto",!1});s.isHidden?l.hide():l.show()},complete:function(){r().hide();s.isPopinFullScreen&&e(!1);s.isPopinCenter&&h()}}),!1},loadHTML:function(n,t){if(r().hide(),n){var i=document.createElement("div");$popin=$(i);$popin.addClass("popin");btn=o();btn.classList.add("jsBtClose");$popin.append(btn);$popin.append(n);$btnClose=$(".jsBtClose",$popin);$btnClose.on("click",function(){u()});return t&&t["class"]&&$popin.addClass(t["class"]),t&&t.isOverflowHidden&&(document.body.style.overflow="hidden"),$overlay=this.showOverlay({isOverlayClick:t&&t.isOverlayClick||!1}),$popin.appendTo($overlay),h(),$popin}return!1},overWeightPopinSessionStorage:function(){var r=$("#TechFormPageType"),t,i,n;if(r)if(t=r.val(),i=sessionStorage.getItem("overWeightPopinPage"),i){if(i.indexOf(t)!=-1)return!1;n=[];n=JSON.parse(i);n.push(t);sessionStorage.setItem("overWeightPopinPage",JSON.stringify(n))}else n=[],n.push(t),sessionStorage.setItem("overWeightPopinPage",JSON.stringify(n));return!0},cleanWeightPopinSessionStorage:function(){var n=$("#TechFormPageType"),i,t;n&&(i=n.val(),t=sessionStorage.getItem("overWeightPopinPage"),t&&sessionStorage.removeItem("overWeightPopinPage"))}}})(window);
//# sourceMappingURL=extendPopin.js.map

//# sourceMappingURL=extendPopin.js.map
