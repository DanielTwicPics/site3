(function(n,t){t.fn.carouselRWD=function(i){var r=t.extend({callback:t.noop,type:"vertical",elMinWidth:0,isEmptyPlace:!0},i);return this.each(function(){var e=this,u=t(".jsUl",e),s=t(">li",u),h=t(".jsLeft, .jsRight",e),i=s.length,c=i?r.elMinWidth||s[0].clientWidth:0,o=0,f=function(){return Math.floor(u[0].clientWidth/c)||1},l=function(){var n=100/(r.isEmptyPlace||i>=f()?f():i);t(">li",u).each(function(){this.style.width=n+"%"});t("a.jsLnf",u).lnf()};t(e).bind("changeWidth",function(n,t){c=t});i&&(function(i){i();t(n).bind("resize",i)}(function(){var c=t(">li",u).length,a=Math.min(f(),i)-c,n,v=[],y;if(h.removeClass("dn"),i<=f()?t(e).addClass("disabled"):t(e).removeClass("disabled"),f()>i?t(e).addClass("noFlex"):t(e).removeClass("noFlex"),a>0)for(n=o+c,y=0;y<a;y++)n>=i&&(n=n-i),v.push(s[n]),n++;else a<0&&t(">li",u).slice(f(),c).remove();u.removeClass("crUlLoading");r.callback(v);u.append(v);l();t("img[data-src]",u).lazyload()}),h.click(function(){var a=this.className,v=e.className,n,h=[],c;if(!/disabled/.test(v)){for(u.empty(),/jsLeft/.test(a)?(o-=f(),o<0&&(o+=i)):(o+=f(),o>=i&&(o-=i)),n=o,c=0;c<f();c++)n>=i&&(n=n-i),h.push(s[n]),n++;r.callback(h);u.append(h);l();t("img[data-src]",u).lazyload(!0)}t(".jsQs",h).bind("mouseenter click",function(){var n=unescape(this.getAttribute("data-qs")||"");n&&(this.href=this.href+n,this.removeAttribute("data-qs"))})}))}),this};t.fn.extCarousel=function(n){var r=t.extend({interval:0,speed:"fast"},n),u=t(this),a=t(".jCarUl, .jsUl",u),e=function(n){return a.children(n||"")},s=e().length,h=e(":first").width(),c=e(":first").height(),i=0,o=t(".jCarPager > li",u),f=!1,v=function(n){var t=e(),l=i<n;f||u.hasClass("disabled")||(f=!0,n==-1?n=s-1:n==s&&(n=0),i=n,l?r.orientation=="vertical"?t.animate({top:"-"+c},r.speed,function(){o.removeClass("active").eq(i).addClass("active");t.css({top:"0px"}).filter(":last").after(t.filter(":first"));f=!1}):t.animate({left:"-"+h},r.speed,function(){o.removeClass("active").eq(i).addClass("active");t.css({left:"0px"}).filter(":last").after(t.filter(":first"));f=!1}):r.orientation=="vertical"?(t.css({top:"-"+c+"px"}).filter(":first").before(t.filter(":last")),t.animate({top:"+="+c},r.speed,function(){o.removeClass("active").eq(i).addClass("active");f=!1})):(t.css({left:"-"+h+"px"}).filter(":first").before(t.filter(":last")),t.animate({left:"+="+h},r.speed,function(){o.removeClass("active").eq(i).addClass("active");f=!1})))},l;t("img[data-src]",u).lazyload();s>3&&u.removeClass("disabled");l=t.isTouch()?"touchstart":"click";t(".jsNext, .jsPrev",u).bind(l,function(){v(/jsNext/.test(this.className)?i+1:i-1)})}})(window,$fwk),function(n,t){t.fn.carouselSwipe=function(r,u){var f=t("#templateCarouli").html();u==null&&(u=!0);t("img[data-src]",this).lazyload(u);this.each(function(){var o=t(this),k=o.data("vertical"),d=o.data("withlogo"),v=t(".jsUl",o),u=t("> li",v),l=t(".jsPrev",o),c=t(".jsNext",o),a=u.length,g=u.not(".liEmpty").length,y=k?u.outerHeight():d&&u.length>0?u.not(":first").outerWidth():u.outerWidth(),p=o.data("limit"),e=0,w,s,h,tt=!1,ut=!1,ot=r&&r.data?r.data:null,it=function(n,r){var v=o.data("url"),y=n?!1:!t.isTouch();f&&v?(y&&(e+=h,p-h<e&&(e=p-h),b("medium",r)),tt||(tt=!0,t.ajax({type:"POST",url:v,data:ot,dataType:"json",success:function(n){if(n&&(n.preloadedSkuList&&o.parents("div.jsPertSwCarousel").find("form[name='algoForm'] input[name='AlgoFormData["+n.id+"].PreloadedSkuList']").val(n.preloadedSkuList),n.products)){var e=parseInt(t("li.jsPdtItem:not('.liEmpty'):last",o).data("pos"));for(isNaN(e)&&(e=0),i=0;i<n.products.length;i++)n.products[i].productposition=e+i+1;t("li",o).not(".liEmpty").last().after(t(Mustache.render(f,n)));o.data("url",n.callUrl);(!n.callUrl||n.callUrl.length<=0)&&(t("li.liEmpty",o).remove(),o.data("url",""));u=t(".jsUl > li",o);a=u.length;g=u.not(".liEmpty").length;a>p&&(a=p);s=a-h;y&&b("medium",r);t.isTouch()&&u&&u.parent()&&showOrHideArrows(u.parent(),l,c)}tt=!1}}))):(t("li.liEmpty",o).remove(),u=t(".jsUl > li",o),a=u.length,g=u.not(".liEmpty").length,p&&a>p&&(a=p),s=a-h)},ft=function(){ut||(t(n).trigger("loadLazyImgs",[t("img",u)]),ut=!0)},rt=1,nt=0,et=0,b;if(showOrHideArrows=function(n,i,r){if(t.isTouch()&&n&&n.get(0)&&n.get(0).scrollLeft){var u=100;n.get(0).scrollLeft<=u?i.addClass("crCarouLimit").addClass("disabled"):i.removeClass("crCarouLimit").removeClass("disabled");n.get(0).scrollLeft+n.get(0).clientWidth>=n.get(0).scrollWidth-u?r.addClass("crCarouLimit").addClass("disabled"):r.removeClass("crCarouLimit").removeClass("disabled")}},t.isTouch()){o.addClass("carTouch");v.one("scroll",ft).on("touchstart",function(){it(!1,!0)});v.on("scroll touchmove",function(){et=t(this).get(0).scrollLeft;t(this).get(0).scrollLeft<=100?l.addClass("crCarouLimit").addClass("disabled"):l.removeClass("crCarouLimit").removeClass("disabled");t(this).get(0).scrollLeft+t(this).get(0).clientWidth>=t(this).get(0).scrollWidth-100?c.addClass("crCarouLimit").addClass("disabled"):c.removeClass("crCarouLimit").removeClass("disabled")})}b=function(n){var r,i;if(t.isTouch()){var f=et+rt*600;n||(f=0);u.parent().scrollLeft(f)}else r={},i=e*y,e!=0&&e==s&&(i-=d?u.outerWidth()+w%y:w%y),i=d&&e!=0&&e!=s?i+u.outerWidth():i,r[k?"top":"left"]=-i+"px",s<=0||e==0?l.addClass("crCarouLimit"):e>0&&l.removeClass("crCarouLimit").removeClass("disabled"),e>=s&&!o.data("url")&&t(".jsUl img",o).filter("[data-src]").length<=0?c.addClass("crCarouLimit"):e<s&&(c.removeClass("crCarouLimit").removeClass("disabled"),c.show(),l.show()),d&&(e==0?l.hide():l.show(),s==1||e==s?c.hide():c.show(),t(document).width()<1420?c.show():c.hide()),n?u.animate(r,n).promise().done(function(){r.left&&t.event.trigger({type:"carouselSwiped",carouselId:u.parents("div.jsPertSwCarousel").attr("id")})}):u.css(r)};l.add(c).click(function(){var n=!!/jsNext/.test(this.className);n?(rt=1,nt++,t(this).addClass("active"),setTimeout(function(){c.removeClass("active")},200)):(rt=-1,nt--,nt<0&&(nt=0),t(this).addClass("active"),setTimeout(function(){l.removeClass("active")},200));t(this).hasClass("crCarouLimit")?u.is(":animated")||(n?u.animate({left:"-=15"},150).animate({left:"+=15"},140):u.animate({left:"+=15"},150).animate({left:"-=15"},140)):(h==0&&(w=k?v.outerHeight():v.outerWidth(),h=Math.floor(w/y)),f&&n&&e+3*h>=g&&it(),ft(),u.is(":animated")||(n?(e+=h,e>s&&(e=s)):(e-=h,e<0&&(e=0)),b("medium")))}),function(i){i();t(n).on("resize",i)}(function(){w=k?v.outerHeight():v.outerWidth();h=Math.floor(w/y);w%y/y>=.98&&++h;s=a-h;s<=0?e=0:e>=s&&(e=s);e+h>=g&&it(!0,!0);b(!1,!0)})})};t.fn.initMabayaCarrousel=function(){var u=t(this),n=t(".jsMabayaContainer",u),i=t(".jsMabayaTitle",u),f=t(".jsSwCarousel",n),e=f.data("url"),s=t("#templateCarouli").html();if(e){var h=f.data("widget"),r=[],o=!0;t.ajax({type:"POST",url:e,dataType:"json",success:function(u){u.products&&u.products.length>0?(t(".jsUl.crSUl",n).prepend(t(Mustache.render(s,u))),i.show(),t(".jsSwCarousel",n).data("url",u.callUrl),n.carouselSwipe(),o=!1):(i.remove(),n.remove());u.missedAdsInfos&&(r=r.concat(u.missedAdsInfos))},error:function(){i.remove();n.remove()}}).always(function(){t.mabayaContext.reportAsyncWidget(h,r,o)})}};t.fn.carouselDot=function(){t.each(t(this),function(i,r){var u=t(".jsDotCarouselItem",r),o=8e3,f=function(n){var i;u.filter(".old").length>0&&u.filter(".old").removeClass("old");u.filter(".act").length>0&&u.filter(".act").removeClass("act").addClass("old");i=u.eq(n);i.addClass("act");t(".jsDots",i).eq(n).addClass("act");var r=t(".imgListRz img",i).css("left"),e=u.filter(".old").index(),f=function(){t(this).removeAttr("style")};i.css({opacity:0}).animate({opacity:1},"slow");e<n?t(".imgListRz img",i).css({left:"+=25px"}).animate({left:r},"slow",f):t(".imgListRz img",i).css({left:"-=25px"}).animate({left:r},"slow",f);t(".imgListRz img[data-src]",i).lazyload(!0);t(".jsUl img[data-src]",i).lazyload()},e;t.isTouch()?t(n).load(function(){e=n.setInterval(function(){var n=u.filter(".act").index();n+1<u.length?f(n+1):f(0)},o)}):t(n).mousemove(function(){e=n.setInterval(function(){var n=u.filter(".act").index();n+1<u.length?f(n+1):f(0)},o);t(this).off("mousemove")});t.each(u,function(i,r){var o=t(".jsDotCarouselNav",r),s=t(".jsDots",o),h=t(".jsLeft",r),c=t(".jsRight",r);s.on("click",function(){var n=t(this).index();f(n)});h.on("click",function(){n.clearInterval(e);var t=u.filter(".act").index();t>0&&f(t-1)});c.on("click",function(){n.clearInterval(e);var t=u.filter(".act").index();t+1<u.length&&f(t+1)})})})};t.init("sliderHub",function(){t(".jsDotCarousel").carouselDot()});t.fn.initCarrouselSlide=function(){if(!t(this).hasClass("jsCarrouselSlide"))return!1;t(this).each(function(n,i){t("img[data-src]",t(i)).lazyload();var r=function(){return t(".jsCarrouselSlideContainer",t(i)).width()},e=function(){return parseInt(t(".jsCarrouselSlideContainer",t(i)).css("padding-left"))},g=function(){return parseInt(t(".jsCarrouselSlideContainer",t(i)).css("padding-right"))},o=function(){return t(".jsCarrouselSlideItem",t(i)).outerWidth()},nt=function(){return t(".jsCarrouselSlideItem",t(i)).length},tt=function(){return Math.floor(r()/o())},f=function(){return tt()*o()},s=function(){return nt()*o()},u=function(){return Math.abs(t(".jsCarrouselSlideContainer",t(i)).scrollLeft())},y=function(n){return!t(n).hasClass("crCarouLimit")},p=function(n){t(n).removeClass("crCarouLimit")},w=function(n){t(n).addClass("crCarouLimit")},b=function(){return!t(".jsCarrouselSlideContainer",t(i)).hasClass("active")},l=function(){p(".jsCarrouselSlideNext")},a=function(){p(".jsCarrouselSlidePrevious")},h=function(){u()+r()+e()+1>=s()&&w(".jsCarrouselSlideNext")},c=function(){u()==0&&w(".jsCarrouselSlidePrevious")},k=function(){u()+r()+e()+1>=s()?(t(".jsCarrouselSlideNext").hide(),u()==0&&t(".jsCarrouselSlidePrevious").hide()):(t(".jsCarrouselSlideNext").show(),t(".jsCarrouselSlidePrevious").show())},d=function(n,r){t(".jsCarrouselSlideContainer",t(i)).addClass("active");t(".jsCarrouselSlideContainer",t(i)).animate(n,500,function(){t(".jsCarrouselSlideContainer",t(i)).removeClass("active");t("img[data-src]",t(i)).lazyload();r&&r()})},v=function(){t(".jsCarrouselSlideItem",t(i)).each(function(){var n=t(this),i=n.position();i.left>=e()&&i.left+o()<=r()+e()+g()+1?n.removeClass("faded"):n.addClass("faded")})};h();c();k();v();t(window).on("resize",function(){l();a();h();c();k();v()});t(".jsCarrouselSlideNext",t(i)).on("click",function(){if(b()&&y(this)){var n=u()+r(),t=n+f()>s()?s()-n+1:f()-(r()-f())/2;d({scrollLeft:"+="+Math.ceil(t)},h);a()}});t(".jsCarrouselSlidePrevious",t(i)).on("click",function(){if(b()&&y(this)){var n=u()-f()<=0?u():f()-(r()-f())/2;d({scrollLeft:"-="+n},c);l()}});t(".jsCarrouselSlideContainer",t(i)).on("scroll",function(){t("img[data-src]",t(i)).lazyload();l();a();h();c();v()})})}}(window,$fwk);
//# sourceMappingURL=extendCarousel.js.map

//# sourceMappingURL=extendCarousel.js.map
